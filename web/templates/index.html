<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LangExtract Runner</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-50 text-gray-900">
    <div class="max-w-7xl mx-auto p-6">
      <h1 class="text-2xl font-bold mb-4">LangExtract Workshop Runner</h1>
      <div id="app" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Left: form + console -->
        <div class="lg:col-span-2 space-y-4">
          <form id="run-form" class="space-y-4" enctype="multipart/form-data">
            <div>
              <label class="block text-sm font-medium mb-1">Model ID</label>
              <input name="MODEL_ID" id="MODEL_ID" class="w-full border rounded px-3 py-2" placeholder="e.g. gpt-4o-mini" />
              <div id="model-badges" class="flex flex-wrap gap-2 mt-2"></div>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium mb-1">Model Temperature</label>
                <input name="MODEL_TEMPERATURE" id="MODEL_TEMPERATURE" type="number" step="0.01" value="0.15" class="w-full border rounded px-3 py-2" />
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">Max Norms per 5k</label>
                <input name="MAX_NORMS_PER_5K" id="MAX_NORMS_PER_5K" type="number" step="1" value="10" class="w-full border rounded px-3 py-2" />
              </div>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium mb-1">Prompt file</label>
                <select name="INPUT_PROMPTFILE" id="INPUT_PROMPTFILE" class="w-full border rounded px-3 py-2"></select>
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">Glossary file</label>
                <select name="INPUT_GLOSSARYFILE" id="INPUT_GLOSSARYFILE" class="w-full border rounded px-3 py-2"></select>
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">Examples file</label>
                <select name="INPUT_EXAMPLESFILE" id="INPUT_EXAMPLESFILE" class="w-full border rounded px-3 py-2"></select>
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">Semantics file</label>
                <select name="INPUT_SEMANTCSFILE" id="INPUT_SEMANTCSFILE" class="w-full border rounded px-3 py-2"></select>
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">Teach file</label>
                <select name="INPUT_TEACHFILE" id="INPUT_TEACHFILE" class="w-full border rounded px-3 py-2"></select>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Input document (optional)</label>
              <input type="file" name="input_document" id="input_document" class="w-full" />
            </div>
            <div class="flex gap-3">
              <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded" type="submit">Start Run</button>
              <span id="run-id" class="text-sm text-gray-600"></span>
            </div>
            <p id="form-error" class="text-sm text-red-600"></p>
          </form>

          <div>
            <h2 class="text-lg font-semibold mb-2">Live Console</h2>
            <pre id="console" class="bg-black text-green-400 p-3 rounded h-64 overflow-auto"></pre>
          </div>
        </div>

        <!-- Right: files + preview + stats -->
        <div class="space-y-4">
          <div>
            <h2 class="text-lg font-semibold mb-2">Stats</h2>
            <pre id="stats" class="bg-white border rounded p-3 h-40 overflow-auto"></pre>
          </div>
          <div>
            <h2 class="text-lg font-semibold mb-2">Run Files</h2>
            <ul id="file-list" class="bg-white border rounded divide-y max-h-60 overflow-auto"></ul>
          </div>
          <div>
            <h2 class="text-lg font-semibold mb-2">Preview</h2>
            <pre id="preview" class="bg-white border rounded p-3 h-64 overflow-auto"></pre>
          </div>
        </div>
      </div>
    </div>
    <script src="/static/app.js"></script>
  </body>
</html>
